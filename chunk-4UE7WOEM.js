import{Aa as d,Oa as i,Pa as e,Wa as t}from"./chunk-KVULZ7C4.js";var o=class n{static \u0275fac=function(m){return new(m||n)};static \u0275cmp=d({type:n,selectors:[["app-building"]],decls:349,vars:0,consts:[[1,"py-16","px-6"],[1,"max-w-4xl","mx-auto"],[1,"mb-12"],[1,"text-4xl","font-bold","text-army-900","mb-4"],[1,"text-army-600"],[1,"bg-army-100","px-1","rounded"],[1,"mb-16"],[1,"text-2xl","font-semibold","text-army-900","mb-6"],[1,"overflow-x-auto","mb-6"],[1,"w-full","text-sm"],[1,"border-b","border-army-200","text-left"],[1,"py-3","pr-4","font-semibold","text-army-900"],[1,"py-3","font-semibold","text-army-900"],[1,"divide-y","divide-army-100"],[1,"py-3","pr-4","text-army-700"],[1,"py-3","pr-4","font-mono","text-camo-olive","font-bold"],[1,"py-3"],[1,"text-xs","bg-army-100","px-1","py-0.5","rounded"],[1,"bg-army-50"],[1,"py-3","pr-4","text-army-900","font-medium"],[1,"py-3","pr-4","font-mono","text-green-700","font-bold"],[1,"text-sm","text-army-600"],[1,"prose-army"],[1,"space-y-3","text-army-700"],[1,"flex","items-start","gap-3"],[1,"text-army-400","mt-1"],["href","https://rustup.rs",1,"text-army-600","hover:text-army-900"],[1,"text-sm","bg-army-100","px-1","py-0.5","rounded"],[1,"space-y-6"],[1,"text-lg","font-medium","text-army-900","mb-3"],[1,"bg-army-900","rounded-xl","p-5","font-mono","text-sm","overflow-x-auto"],[1,"text-army-100"],[1,"text-army-500"],[1,"text-army-400","mt-2"],[1,"text-army-600","mb-6"],[1,"grid","md:grid-cols-2","gap-6","mb-6"],[1,"p-4","border","border-army-200","rounded-lg","bg-white"],[1,"font-medium","text-army-900","mb-3"],[1,"bg-army-900","rounded-lg","p-3","font-mono","text-xs","overflow-x-auto"],[1,"space-y-2","text-sm","text-army-700"],[1,"flex","items-center","gap-2"],[1,"text-camo-olive"],[1,"p-4","bg-army-100","rounded-lg","border","border-army-200"],[1,"text-sm","text-army-700"],[1,"text-army-900"],[1,"text-xs","bg-army-200","px-1","py-0.5","rounded"],[1,"text-army-400","mb-3"],[1,"text-army-100","whitespace-pre"],[1,"py-3","pr-4"],[1,"overflow-x-auto"],[1,"py-3","pr-4","text-camo-olive","font-bold"],[1,"py-3","text-army-700"],[1,"py-3","pr-4","text-army-400"],[1,"mt-6","bg-army-900","rounded-xl","p-5","font-mono","text-sm","overflow-x-auto"],[1,"text-army-400"],[1,"mt-6","p-4","bg-camo-olive/10","rounded-lg","border","border-camo-olive/30"],[1,"text-sm","text-camo-forest"]],template:function(m,a){m&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),t(4,"Building"),e(),i(5,"p",4),t(6," Build armybox from source. The "),i(7,"code",5),t(8,"#[no_std]"),e(),t(9," design produces incredibly small binaries. "),e()(),i(10,"section",6)(11,"h2",7),t(12,"Binary Sizes"),e(),i(13,"div",8)(14,"table",9)(15,"thead")(16,"tr",10)(17,"th",11),t(18,"Build Type"),e(),i(19,"th",11),t(20,"Size"),e(),i(21,"th",12),t(22,"Command"),e()()(),i(23,"tbody",13)(24,"tr")(25,"td",14),t(26,"Release"),e(),i(27,"td",15),t(28,"74 KB"),e(),i(29,"td",16)(30,"code",17),t(31,"cargo build --release"),e()()(),i(32,"tr",18)(33,"td",19),t(34,"UPX Compressed"),e(),i(35,"td",20),t(36,"36 KB"),e(),i(37,"td",16)(38,"code",17),t(39,"upx --best armybox"),e()()()()()(),i(40,"p",21),t(41," All builds include "),i(42,"strong"),t(43,"57 applets"),e(),t(44,". That's approximately "),i(45,"strong"),t(46,"1.3 KB per applet"),e(),t(47,". "),e()(),i(48,"section",6)(49,"h2",7),t(50,"Prerequisites"),e(),i(51,"div",22)(52,"ul",23)(53,"li",24)(54,"span",25),t(55,"\u2022"),e(),i(56,"span")(57,"strong"),t(58,"Rust 2024"),e(),t(59," (1.85+) - install via "),i(60,"a",26),t(61,"rustup"),e()()(),i(62,"li",24)(63,"span",25),t(64,"\u2022"),e(),i(65,"span")(66,"strong"),t(67,"upx"),e(),t(68," (optional) for smallest builds: "),i(69,"code",27),t(70,"apt install upx-ucl"),e()()(),i(71,"li",24)(72,"span",25),t(73,"\u2022"),e(),i(74,"span")(75,"strong"),t(76,"musl-tools"),e(),t(77," (optional) for static builds: "),i(78,"code",27),t(79,"apt install musl-tools"),e()()()()()(),i(80,"section",6)(81,"h2",7),t(82,"Quick Start"),e(),i(83,"div",28)(84,"div")(85,"h3",29),t(86,"Clone and build"),e(),i(87,"div",30)(88,"div",31)(89,"div")(90,"span",32),t(91,"$"),e(),t(92," git clone https://github.com/PegasusHeavyIndustries/armybox"),e(),i(93,"div")(94,"span",32),t(95,"$"),e(),t(96," cd armybox"),e(),i(97,"div")(98,"span",32),t(99,"$"),e(),t(100," cargo build --release"),e()()()(),i(101,"div")(102,"h3",29),t(103,"Compress with UPX (optional)"),e(),i(104,"div",30)(105,"div",31)(106,"div")(107,"span",32),t(108,"$"),e(),t(109," upx --best target/release/armybox"),e(),i(110,"div",33),t(111,"# 74KB \u2192 36KB"),e()()()(),i(112,"div")(113,"h3",29),t(114,"Install to system"),e(),i(115,"div",30)(116,"div",31)(117,"div")(118,"span",32),t(119,"$"),e(),t(120," sudo install -m 755 target/release/armybox /usr/local/bin/"),e(),i(121,"div")(122,"span",32),t(123,"$"),e(),t(124," armybox --install /usr/local/bin"),e(),i(125,"div",33),t(126,"# Creates symlinks for all 57 applets"),e()()()()()(),i(127,"section",6)(128,"h2",7),t(129,"Size Optimizations"),e(),i(130,"p",34),t(131," Armybox achieves its tiny size through "),i(132,"code",5),t(133,"#[no_std]"),e(),t(134," and aggressive compiler optimizations. "),e(),i(135,"div",35)(136,"div",36)(137,"h3",37),t(138,"Cargo Profile"),e(),i(139,"div",38)(140,"div",31)(141,"div"),t(142,"[profile.release]"),e(),i(143,"div"),t(144,'opt-level = "z" '),i(145,"span",32),t(146,"# Size"),e()(),i(147,"div"),t(148,'lto = "fat" '),i(149,"span",32),t(150,"# Full LTO"),e()(),i(151,"div"),t(152,"codegen-units = 1 "),i(153,"span",32),t(154,"# Better opt"),e()(),i(155,"div"),t(156,'panic = "abort" '),i(157,"span",32),t(158,"# No unwind"),e()(),i(159,"div"),t(160,'strip = "symbols" '),i(161,"span",32),t(162,"# Strip all"),e()()()()(),i(163,"div",36)(164,"h3",37),t(165,"Why So Small?"),e(),i(166,"ul",39)(167,"li",40)(168,"span",41),t(169,"\u2713"),e(),i(170,"span")(171,"strong"),t(172,"#[no_std]"),e(),t(173," - No Rust stdlib"),e()(),i(174,"li",40)(175,"span",41),t(176,"\u2713"),e(),i(177,"span")(178,"strong"),t(179,"Direct libc"),e(),t(180," - Raw syscalls"),e()(),i(181,"li",40)(182,"span",41),t(183,"\u2713"),e(),i(184,"span")(185,"strong"),t(186,"No runtime"),e(),t(187," - #[no_main]"),e()(),i(188,"li",40)(189,"span",41),t(190,"\u2713"),e(),i(191,"span")(192,"strong"),t(193,"panic=abort"),e(),t(194," - No unwinding"),e()()()()(),i(195,"div",42)(196,"p",43)(197,"strong",44),t(198,"UPX Compression:"),e(),t(199," Using "),i(200,"code",45),t(201,"upx --best"),e(),t(202," compresses the binary from 74KB to ~36KB (48% of original size) while remaining fully functional. "),e()()(),i(203,"section",6)(204,"h2",7),t(205,"Linker Configuration"),e(),i(206,"p",34),t(207," The "),i(208,"code",5),t(209,".cargo/config.toml"),e(),t(210," configures linker flags for size optimization. "),e(),i(211,"div",30)(212,"div",46),t(213,"# .cargo/config.toml"),e(),i(214,"div",47),t(215,`[target.x86_64-unknown-linux-gnu]
rustflags = [ "-C", "link-arg=-Wl,--gc-sections", `),i(216,"span",32),t(217,"# Remove unused"),e(),t(218,' "-C", "link-arg=-Wl,--as-needed", '),i(219,"span",32),t(220,"# Only needed libs"),e(),t(221,' "-C", "link-arg=-Wl,-O2", '),i(222,"span",32),t(223,"# Linker opt"),e(),t(224,' "-C", "link-arg=-lc", '),i(225,"span",32),t(226,"# Link libc"),e(),t(227,`
]`),e()()(),i(228,"section",6)(229,"h2",7),t(230,"Cross Compilation"),e(),i(231,"p",34),t(232," Build for different architectures using Rust's cross-compilation support. "),e(),i(233,"div",8)(234,"table",9)(235,"thead")(236,"tr",10)(237,"th",11),t(238,"Target"),e(),i(239,"th",11),t(240,"Command"),e()()(),i(241,"tbody",13)(242,"tr")(243,"td",14),t(244,"x86_64 Linux (musl)"),e(),i(245,"td",48)(246,"code",17),t(247,"cargo build --release --target x86_64-unknown-linux-musl"),e()()(),i(248,"tr")(249,"td",14),t(250,"ARM64 (musl)"),e(),i(251,"td",48)(252,"code",17),t(253,"cargo build --release --target aarch64-unknown-linux-musl"),e()()(),i(254,"tr")(255,"td",14),t(256,"ARM32 (musl)"),e(),i(257,"td",48)(258,"code",17),t(259,"cargo build --release --target armv7-unknown-linux-musleabihf"),e()()()()()(),i(260,"div",30)(261,"div",46),t(262,"# Install target and build"),e(),i(263,"div",31)(264,"div")(265,"span",32),t(266,"$"),e(),t(267," rustup target add x86_64-unknown-linux-musl"),e(),i(268,"div")(269,"span",32),t(270,"$"),e(),t(271," cargo build --release --target x86_64-unknown-linux-musl"),e()()()(),i(272,"section",6)(273,"h2",7),t(274,"Cargo Features"),e(),i(275,"p",34),t(276," Armybox has minimal features since it's "),i(277,"code",5),t(278,"#[no_std]"),e(),t(279,". "),e(),i(280,"div",49)(281,"table",9)(282,"thead")(283,"tr",10)(284,"th",11),t(285,"Feature"),e(),i(286,"th",11),t(287,"Default"),e(),i(288,"th",12),t(289,"Description"),e()()(),i(290,"tbody",13)(291,"tr")(292,"td",48)(293,"code",17),t(294,"alloc"),e()(),i(295,"td",50),t(296,"\u2713"),e(),i(297,"td",51),t(298,"Heap allocation (Vec, String)"),e()(),i(299,"tr")(300,"td",48)(301,"code",17),t(302,"std"),e()(),i(303,"td",52),t(304,"\u2014"),e(),i(305,"td",51),t(306,"Standard library (for testing)"),e()()()()()(),i(307,"section")(308,"h2",7),t(309,"Docker"),e(),i(310,"p",34),t(311," Use armybox as a minimal base for containers. Perfect for FROM scratch images. "),e(),i(312,"div",30)(313,"div",46),t(314,"# Dockerfile (~100KB total image!)"),e(),i(315,"div",31)(316,"div"),t(317,"FROM scratch"),e(),i(318,"div"),t(319,"COPY target/release/armybox /bin/armybox"),e(),i(320,"div"),t(321,'RUN ["/bin/armybox", "--install", "/bin"]'),e(),i(322,"div"),t(323,'ENTRYPOINT ["/bin/sh"]'),e()()(),i(324,"div",53)(325,"div",46),t(326,"# Build the image"),e(),i(327,"div",31)(328,"div")(329,"span",32),t(330,"$"),e(),t(331," cargo build --release"),e(),i(332,"div")(333,"span",32),t(334,"$"),e(),t(335," docker build -t myapp ."),e(),i(336,"div")(337,"span",32),t(338,"$"),e(),t(339," docker images myapp"),e(),i(340,"div",33),t(341,"REPOSITORY TAG SIZE"),e(),i(342,"div",54),t(343,"myapp latest ~100KB"),e()()(),i(344,"div",55)(345,"p",56)(346,"strong",41),t(347,"Note:"),e(),t(348," With UPX compression, you can get Docker images under 50KB! "),e()()()()())},encapsulation:2})};export{o as BuildingComponent};
